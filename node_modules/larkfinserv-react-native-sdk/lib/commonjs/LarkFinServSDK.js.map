{"version":3,"names":["_axios","_interopRequireDefault","require","_reactNative","_constants","_base","e","__esModule","default","LarkFinServSDK","eventHandlers","Map","iframeUrl","sessionToken","constructor","config","validateConfig","generateSessionToken","initialize","apiKey","apiSecret","Error","endpoint","getSDKApiUrl","environment","phoneNumber","response","axios","get","headers","DEFAULT_HEADERS","timeout","data","sessionId","themeConfig","userId","user","id","theme","partnerName","partnerId","currentJourneyStep","stepProgressSummary","hasActiveLoan","loanDetails","requiresEmailVerification","consentData","submitConsentData","generateIframeUrl","error","errorMessage","isAxiosError","status","message","request","console","getIframeUrl","getConfig","openEligibilityCheck","mode","supported","Linking","canOpenURL","openURL","emitEvent","on","event","handler","set","off","delete","handleWebViewMessage","JSON","parse","type","createWebViewMessage","stringify","metadata","clearSession","reason","timestamp","Date","toISOString","getSessionInfo","hasSessionId","hasUserId","hasPhoneNumber","now","ttl","encodeBase64","baseUrl","getSDKUrl","params","push","encodeURIComponent","join","eventType","getClientIP","ip","consentPayload","provider","privacyConsent","promotionalConsent","ipAddress","userAgent","deviceFingerprint","post","success","log","_default","exports"],"sourceRoot":"../../src","sources":["LarkFinServSDK.ts"],"mappings":"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","ignoreList":[]}
